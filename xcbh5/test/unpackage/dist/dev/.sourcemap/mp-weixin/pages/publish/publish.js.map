{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/86139/Desktop/demo/test/pages/publish/publish.vue?8862","webpack:///C:/Users/86139/Desktop/demo/test/pages/publish/publish.vue?b5b8","webpack:///C:/Users/86139/Desktop/demo/test/pages/publish/publish.vue?e52f","uni-app:///pages/publish/publish.vue","webpack:///C:/Users/86139/Desktop/demo/test/pages/publish/publish.vue?2baa","webpack:///C:/Users/86139/Desktop/demo/test/pages/publish/publish.vue?0099"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","pageData","showEditPopup","currentItem","categories","pickerRange","selectedCategoryIndex","imageUploaded","showEditPopup1","pickerRange1","selectedCategoryIndex1","itemDescription","itemPrice","marketList","candidates","unit","isloaded","mixins","onLoad","onShow","methods","fetchCategories","api","id","content","fetchMarketList","token","params","limit","page","res","title","console","onCategoryChange","onMarketChange","fetchData","response","goTorelePage","uni","url","edit","fetchCommodityDetails","uploadcuisine","count","sizeType","sourceType","success","uploadPath","tempFilePaths","upload","request","shelves","closePopup","confirmEdit","icon","category_id","goodsname","imglogo","confirmShelves","goods_id","shop_id","price","weight_name"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,yQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAimB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACuHrnB;AAGA;AACA;AAEA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QACA;UACA;UACA;YAAA;cACAC;cACAC;YACA;UAAA;UACA;UACA;UACA;UACA;YAAA;UAAA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;gBACAC;kBACAC;kBAAA;kBACAC;gBACA;gBAAA;gBAAA,OACAP;kBAAAI;gBAAA;cAAA;gBAAAI;gBACA;kBACAjB;oBAAA;sBACAU;sBACAQ;oBACA;kBAAA;kBACA;kBACA;oBAAA;kBAAA;gBACA;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAb;cAAA;gBAAAc;gBAAA,kCACAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAC;MACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAnB;QACA;UACA;UACA;UACA;;UAEA;UACA;YAAA;UAAA;UACA;YACA;UACA;QACA;MACA;IACA;IACAoB;MAAA;MACAJ;QACAK;QACAC;QACAC;QACAC;UACA;UACA;UACA;UACA;UACA;YACA;YACA,iBAGA;gBACAC;gBACAC;cACA;cALAC;cACAC;YAMAD;cACAjB;cACA;cACAA;cACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IAEAmB;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACAf;UACAP;UACAuB;QACA;QACA;MACA;;MAEA;MACA;QACAhB;UACAP;UACAuB;QACA;QACA;MACA;;MAEA;MACA;QAAA/B;QAAAgC;QAAAC;QAAAC;MACAnC;QAAAC;QAAAgC;QAAAC;QAAAC;MAAA;QACA;UACAnB;YACAP;YACAuB;UACA;UACA;UACA;QACA;UACAhB;YACAP;YACAuB;UACA;QACA;MACA;IACA;IAEAI;MAAA;MACA1B;MAEA;QACAM;UAAAP;UAAAuB;QAAA;QACA;MACA;MACA;QACAhB;UAAAP;UAAAuB;QAAA;QACA;MACA;MACAhC;QACAqC;QACAC;QACApC;QACAqC;QACAC;MACA;QACA;UACAxB;YAAAP;UAAA;UACA;UACA;QACA;UACAO;YAAAP;YAAAuB;UAAA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AClWA;AAAA;AAAA;AAAA;AAAm3B,CAAgB,o3BAAG,EAAC,C;;;;;;;;;;;ACAv4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/publish/publish.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/publish/publish.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./publish.vue?vue&type=template&id=177a8126&\"\nvar renderjs\nimport script from \"./publish.vue?vue&type=script&lang=js&\"\nexport * from \"./publish.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/publish/publish.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=template&id=177a8126&\"","var components\ntry {\n  components = {\n    uniCombox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-combox/components/uni-combox/uni-combox\" */ \"@/uni_modules/uni-combox/components/uni-combox/uni-combox.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"me-container\">\r\n\t\t<!-- 其他内容 -->\r\n\t\t<scroll-view class=\"Stallholder\" scroll-y=\"true\" @scrolltolower=\"handleScrollToLower\"\r\n\t\t\t:style=\"{ height: '100vh' }\">\r\n\t\t\t<view class=\"disheslist\">\r\n\t\t\t\t<view class=\"type\" v-for=\"item in pageData\" :key=\"item.id\">\r\n\t\t\t\t\t<image class=\"type-image\" v-if=\"isloaded\"  lazy-load  :src=\"item.imglogo \" mode=\"scaleToFill\"></image>\r\n\r\n\t\t\t\t\t<view class=\"regard\">\r\n\t\t\t\t\t\t<view class=\"typetitle\">\r\n\t\t\t\t\t\t\t{{item.goodsname}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <view class=\"price\"> -->\r\n\t\t\t\t\t\t<!-- ¥{{parseFloat(item.price).toFixed(2) }}/斤 -->\r\n\t\t\t\t\t\t<!-- <button @click=\"goToBuyPage\">购买</button> -->\r\n\t\t\t\t\t\t<!-- </view> -->\r\n\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t<view class=\"function\">\r\n\t\t\t\t\t\t<view class=\"rigicon\" @click=\"edit(item)\">修改</view>\r\n\t\t\t\t\t\t<view class=\"rigicon\" @click=\"shelves(item)\">上架</view>\r\n\t\t\t\t\t\t<!-- <view class=\"rigicon\" @click=\"off\">下架</view> -->\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-if=\"pageLoading\" class=\"loading\">加载中...</view>\r\n\t\t\t<view v-if=\"!hasMore\" class=\"loading\">没有更多了</view>\r\n\t\t</scroll-view>\r\n\t\t<view class=\"butt\" @click=\"goTorelePage\">\r\n\t\t\t点击新增菜品\r\n\t\t</view>\r\n\t\t<!-- 编辑弹出层 -->\r\n\t\t<view v-if=\"showEditPopup\" class=\"popup-overlay\" @click=\"closePopup\">\r\n\t\t\t<view class=\"popup\" @click.stop>\r\n\t\t\t\t<view class=\"close-button\" @click=\"closePopup\">×</view>\r\n\t\t\t\t<!-- <view class=\"popup-header\">修改商品信息</view> -->\r\n\r\n\t\t\t\t<!-- 在这里添加你的表单内容 -->\r\n\t\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t\t<!-- 表单或其他内容 -->\r\n\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<view class=\"cuisine\">\r\n\t\t\t\t\t\t\t<view class=\"title\">菜名</view>\r\n\t\t\t\t\t\t\t\t<view class=\"shuru\"><input class=\"shurucon\" type=\"text\" v-model=\"currentItem.goodsname\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"class\">\r\n\t\t\t\t\t\t\t<view class=\"title\">分类</view>\r\n\t\t\t\t\t\t\t<picker class=\"picker\" :range=\"pickerRange\" :value=\"selectedCategoryIndex\"\r\n\t\t\t\t\t\t\t\t@change=\"onCategoryChange\">\r\n\t\t\t\t\t\t\t\t<view class=\"picker-text\">{{ pickerRange[selectedCategoryIndex] }}</view>\r\n\t\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"editimg\">\r\n\t\t\t\t\t\t\t<view class=\"title\">图片</view>\r\n\t\t\t\t\t\t\t<image class=\"cimg\" :src=\"currentItem.imglogo\" mode=\"aspectFit\" @tap=\"uploadcuisine\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t\t<button @click=\"closePopup\">取消</button>\r\n\t\t\t\t\t<button @click=\"confirmEdit\" style=\"background-color: #007aff;color: white;\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 上架弹出层 -->\r\n\t\t<view v-if=\"showEditPopup1\" class=\"popup-overlay\" @click=\"closePopup\">\r\n\t\t\t<view class=\"popup\" @click.stop>\r\n\t\t\t\t<view class=\"close-button\" @click=\"closePopup\">×</view>\r\n\t\t\t\t<!-- <view class=\"popup-header\">修改商品信息</view> -->\r\n\t\t\r\n\t\t\t\t<!-- 在这里添加你的表单内容 -->\r\n\t\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t\t<!-- 表单或其他内容 -->\r\n\t\t\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<view class=\"cuisine\">\r\n\t\t\t\t\t\t\t<view class=\"title\">选择摊位</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<picker class=\"picker1\" :range=\"pickerRange1\" :value=\"selectedCategoryIndex1\"\r\n\t\t\t\t\t\t\t\t@change=\"onMarketChange\">\r\n\t\t\t\t\t\t\t\t<view class=\"picker-text\">{{ pickerRange1[selectedCategoryIndex1]}}</view>\r\n\t\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"editimg\">\r\n\t\t\t\t\t\t\t<view class=\"title\">菜品价格</view>\r\n\t\t\t\t\t\t\t<view class=\"shuru\"><input class=\"shurucon\" type=\"text\" placeholder=\"请输入价格\" v-model=\"itemPrice\" /></view>\r\n\t\t\t\t\t\t\t<view class=\"example-body\">\r\n\t\t\t\t\t\t\t\t<uni-combox :candidates=\"candidates\" placeholder=\"单位\" v-model=\"unit\"></uni-combox>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"class\">\r\n\t\t\t\t\t\t\t<view class=\"title\">详细说明</view>\r\n\t\t\t\t\t\t\t<view class=\"shuru\"><input class=\"shurucon\" type=\"text\" placeholder=\"请输入详细说明\" v-model=\"itemDescription\" /></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t\t<button @click=\"closePopup\">取消</button>\r\n\t\t\t\t\t<button @click=\"confirmShelves\" style=\"background-color: #007aff;color: white;\">确认</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index'\r\n\timport usePage from '@/hooks/usePage';\r\n\timport {\r\n\t\tuseUpload\r\n\t} from \"@/hooks/useUpload\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpageData: [],\r\n\t\t\t\tshowEditPopup: false,\r\n\t\t\t\tcurrentItem: {},\r\n\t\t\t\tcategories: [],\r\n\t\t\t\tpickerRange: [],\r\n\t\t\t\tselectedCategoryIndex: 0,\r\n\t\t\t\timageUploaded: false,\r\n\t\t\t\t// imglogo: '',\r\n\t\t\t\tshowEditPopup1: false,\r\n\t\t\t\tpickerRange1: [],\r\n\t\t\t\tselectedCategoryIndex1: 0,\r\n\t\t\t\titemDescription: '', // 上架时的详细说明\r\n\t\t\t\titemPrice: '', // 上架时的价格\r\n\t\t\t\tmarketList: [], // 存储摊位列表\r\n\t\t\t\tcandidates: ['斤', '两'], \r\n\t\t\t\tunit: '', \r\n\t\t\t\tisloaded:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmixins: [usePage],\r\n\t\tonLoad() {\r\n\t\t\tthis.isloaded = true;\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.reloadData()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfetchCategories() {\r\n\t\t\t\tapi.cglist().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// 获取分类数据\r\n\t\t\t\t\t\tconst categories = res.data.listdata.map(item => ({\r\n\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\tcontent: item.content\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t// 存储分类数据\r\n\t\t\t\t\t\tthis.categories = categories;\r\n\t\t\t\t\t\t// 初始化 picker 的范围数据，包括默认提示项\r\n\t\t\t\t\t\tthis.pickerRange = [...categories.map(category => category.content)];\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync fetchMarketList() {\r\n\t\t\t        try {\r\n\t\t\t            const token = uni.getStorageSync('token'); // 请根据实际情况获取 token\r\n\t\t\t            const params = {\r\n\t\t\t                limit: 100, // 设置你需要的 limit\r\n\t\t\t                page: 1 // 设置你需要的 page\r\n\t\t\t            };\r\n\t\t\t            const res = await api.getMyShops({ token: this.token, ...params });\r\n\t\t\t            if (res.code === 200) {\r\n\t\t\t                const marketList = res.data.listdata.map(item => ({\r\n\t\t\t                    id: item.id,\r\n\t\t\t                    title: item.title\r\n\t\t\t                }));\r\n\t\t\t                this.marketList = marketList;\r\n\t\t\t                this.pickerRange1 = [...marketList.map(market => market.title)];\r\n\t\t\t            } else {\r\n\t\t\t                console.error('Failed to fetch market list:', res.msg);\r\n\t\t\t            }\r\n\t\t\t        } catch (error) {\r\n\t\t\t            console.error('Error fetching market list:', error);\r\n\t\t\t        }\r\n\t\t\t    },\r\n\t\t\tonCategoryChange(e) {\r\n\t\t\t\tthis.selectedCategoryIndex = e.detail.value;\r\n\t\t\t\tthis.currentItem.category_id = this.categories[this.selectedCategoryIndex].id;\r\n\t\t\t},\r\n\t\t\tonMarketChange(e) {\r\n\t\t\t\tthis.selectedCategoryIndex1 = e.detail.value;\r\n\t\t\t\tthis.currentItem.market_id = this.marketList[this.selectedCategoryIndex1].id;\r\n\t\t\t},\r\n\t\t\tasync fetchData(params) {\r\n\t\t\t\tconst response = await api.getCommdityList(params)\r\n\t\t\t\treturn response.data\r\n\r\n\t\t\t},\r\n\t\t\t// 你的方法\r\n\t\t\tgoTorelePage() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/release/release'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tedit(item) {\r\n\t\t\t\tthis.currentItem = {...item};\r\n\t\t\t\tthis.fetchCategories(); // 获取分类数据\r\n\t\t\t\tthis.showEditPopup = true; // 显示弹出层\r\n\t\t\t\t// 调用获取菜品详情的方法\r\n\t\t\t\tthis.fetchCommodityDetails(item.id);\r\n\t\t\t\t// 检查用户是否选择了有效的分类（跳过第一个默认项）\r\n\t\t\t},\r\n\t\t\tfetchCommodityDetails(id) {\r\n\t\t\t\tapi.getCommodityDetails(id).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tconst commodity = res.data.listdata[0];\r\n\t\t\t\t\t\tthis.currentItem.goodsname = commodity.goodsname;\r\n\t\t\t\t\t\tthis.currentItem.imglogo = commodity.imglogo;\r\n\r\n\t\t\t\t\t\t// 根据分类 ID 找到对应的分类索引\r\n\t\t\t\t\t\tconst categoryIndex = this.categories.findIndex(cat => cat.id === commodity.category_id);\r\n\t\t\t\t\t\tif (categoryIndex !== -1) {\r\n\t\t\t\t\t\t\tthis.selectedCategoryIndex = categoryIndex;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tuploadcuisine() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// const tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\t// this.uploadImage(tempFilePaths[0]);\r\n\t\t\t\t\t\t// this.isImageSelected = true; // 更新图片选择状态\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\tif (tempFilePaths.length > 0) {\r\n\t\t\t\t\t\t\t// console.log(tempFilePaths);\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tupload,\r\n\t\t\t\t\t\t\t\trequest\r\n\t\t\t\t\t\t\t} = useUpload({\r\n\t\t\t\t\t\t\t\tuploadPath: '/group1/upload',\r\n\t\t\t\t\t\t\t\ttempFilePaths: tempFilePaths[0]\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tupload().then((res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tthis.currentItem.imglogo = res;\r\n\t\t\t\t\t\t\t\tconsole.log('更新后的图片路径:', this.currentItem.imglogo);\r\n\t\t\t\t\t\t\t\tthis.isImageSelected = true;\r\n\t\t\t\t\t\t\t\tthis.imageUploaded = true; // 更新图片上传状态\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// api.uploadImage(tempFilePaths[0])\r\n\t\t\t\t\t\t\t// \t.then(data => {\r\n\t\t\t\t\t\t\t// \t\tthis.user.headimgurl = data.url; // 更新头像 URL\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t// \t.catch(error => {\r\n\t\t\t\t\t\t\t// \t\tuni.showToast({\r\n\t\t\t\t\t\t\t// \t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\t// \t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\t// \t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tshelves(item) {\r\n\t\t\t\tthis.currentItem = {...item};\r\n\t\t\t\tthis.showEditPopup1 = true; // 显示弹出层\r\n\t\t\t\tthis.fetchMarketList(); // 获取摊位列表\r\n\t\t\t},\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.showEditPopup = false; // 隐藏弹出层\r\n\t\t\t\tthis.showEditPopup1 = false;\r\n\t\t\t},\r\n\t\t\t//确认事件\r\n\t\t\tconfirmEdit() {\r\n\t\t\t\t// 在这里处理修改的确认逻辑\r\n\t\t\t\t// 检查当前商品 ID 是否有效\r\n\t\t\t\tif (!this.currentItem.id) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '商品 ID 不正确',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 检查图片上传状态或显示上传错误\r\n\t\t\t\tif (!this.imageUploaded && !this.currentItem.imglogo) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请上传图片',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 调用 editGoods API 进行修改\r\n\t\t\t\tconst {id,category_id,goodsname,imglogo} = this.currentItem;\r\n\t\t\t\tapi.editGoods({id,category_id,goodsname,imglogo}).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '商品修改成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.reloadData(); // 重新加载数据\r\n\t\t\t\t\t\tthis.closePopup(); // 关闭弹出层\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg || '商品修改失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tconfirmShelves() {\r\n\t\t\t\tconsole.log('Goods ID:', this.currentItem.id);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!this.itemPrice) {\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: '请填写价格', icon: 'none' });\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!this.unit) {\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: '请选择单位', icon: 'none' });\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tapi.addCommodityToShop({\r\n\t\t\t\t\t\t\t\tgoods_id: this.currentItem.id,\r\n\t\t\t\t\t\t\t\tshop_id: this.marketList[this.selectedCategoryIndex1].id,\r\n\t\t\t\t\t\t\t\tcontent: this.itemDescription,\r\n\t\t\t\t\t\t\t\tprice: parseFloat(this.itemPrice),\r\n\t\t\t\t\t\t\t\tweight_name: this.unit\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({ title: '上架成功' });\r\n\t\t\t\t\t\t\t\t\tthis.closePopup();\r\n\t\t\t\t\t\t\t\t\tthis.reloadData();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({ title: '上架失败', icon: 'none' });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.me-container {\r\n\t\toverflow: hidden;\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 0rpx 40rpx 0 40rpx;\r\n\t\tcolor: white;\r\n\t\tz-index: 1;\r\n\t\tbackground-color: #f8f8f8;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-start;\r\n\t\t/* 从顶部开始布局 */\r\n\t\tposition: relative;\r\n\t\t/* 确保子元素的绝对定位是相对于这个容器 */\r\n\t\theight: calc(100vh -10rpx);\r\n\t\t/* 确保容器占满整个视口高度 */\r\n\t}\r\n\r\n\t.butt {\r\n\t\tbackground-color: #007aff;\r\n\t\theight: 100rpx;\r\n\t\twidth: calc(100% - 80rpx);\r\n\t\t/* 减去左右的 padding */\r\n\t\tborder-radius: 20rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 100rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tposition: absolute;\r\n\t\tbottom: 10rpx;\r\n\t\t/* 距离底部的距离 */\r\n\t\tleft: 40rpx;\r\n\t\t/* 距离左侧的距离，和me-container的padding一致 */\r\n\t}\r\n\r\n\t.disheslist {\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.type {\r\n\t\theight: 12%;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tbackground-color: white;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.type-image {\r\n\t\theight: 180rpx;\r\n\t\twidth: 30%;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\r\n\t.regard {\r\n\t\twidth: 30%;\r\n\t\theight: 180rpx;\r\n\t\tcolor: black;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 600;\r\n\t\t/* display: flex; */\r\n\t\t/* flex-direction: column; */\r\n\t\t/* background-color: bisque; */\r\n\t\t/* justify-content: space-around; */\r\n\t\tmargin-left: 20rpx;\r\n\t\t/* 将子元素放置在容器的顶部和底部 */\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t/* .price {\r\n\t\talign-self: self-start;\r\n\t} */\r\n\t.function {\r\n\t\tdisplay: flex;\r\n\t\theight: 100%;\r\n\t\twidth: 220rpx;\r\n\t\tmargin-left: auto;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.rigicon {\r\n\t\theight: 50%;\r\n\t\twidth: 100rpx;\r\n\t\tbackground-color: #007aff;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tborder-radius: 30rpx;\r\n\t}\r\n\r\n\t.loading {\r\n\t\ttext-align: center;\r\n\t\tpadding: 20rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\r\n\t.popup-overlay {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 1000;\r\n\t\tcolor: black;\r\n\t}\r\n\r\n\t.popup {\r\n\t\tposition: relative;\r\n\t\twidth: 80%;\r\n\t\tmax-width: 600rpx;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-shadow: 0 0 15px rgba(0, 0, 0, 0.2);\r\n\t}\r\n\r\n\t.popup-header {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\t/* 这里你可以添加弹出层内容的样式 */\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.popup-footer {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.close-button {\r\n\t\tposition: absolute;\r\n\t\ttop: 5rpx;\r\n\t\tright: 5rpx;\r\n\t\tfont-size: 40rpx;\r\n\t\tcolor: black;\r\n\t\tcursor: pointer;\r\n\t\tz-index: 10;\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 50%;\r\n\t\tbox-shadow: 0 0 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.content {\r\n\t\twidth: 100%;\r\n\t\theight: 300rpx;\r\n\t}\r\n\r\n\t.cuisine {\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.class {\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.editimg {\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.cimg {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\t.picker {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: end;\r\n\t\talign-items: center;\r\n\t\tfont-size: 35rpx;\r\n\t}\r\n\r\n\t.shuru {\r\n\t\twidth: auto;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: end;\r\n\t\talign-items: center;\r\n\t}\r\n\t.example-body{\r\n\t\twidth: 32%;\r\n\t}\r\n\t.shurucon {\r\n\t\ttext-align: end;\r\n\t\tfont-size: 35rpx;\r\n\t}\r\n\r\n\t.title {\r\n\t\twidth: 40%;\r\n\t\tfont-size: 35rpx;\r\n\t}\r\n\t.picker1{\r\n\t\twidth: 300rpx;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: end;\r\n\t\talign-items: center;\r\n\t\tfont-size: 35rpx;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1727525167991\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}