(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Clock/Clock"],{4111:function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("2864");o(n("3240"));var a=o(n("49cb"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"49cb":function(e,t,n){"use strict";n.r(t);var o=n("e7f7"),a=n("7378");for(var c in a)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(c);n("e8c1");var i=n("828b"),r=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=r.exports},7277:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("7eb4")),c=o(n("ee10")),i=n("6213"),r={data:function(){return{isSignedIn:!1,timestamp:"",time:""}},onLoad:function(e){e.time&&(this.time=e.time),this.signIn()},methods:{signIn:function(t){var n=this;return(0,c.default)(a.default.mark((function o(){var c,r,s,u,l,f,d,g,h;return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,c=e.getStorageSync("token"),c){o.next=5;break}return e.showModal({title:"提示",content:"请登录后再打卡",showCancel:!1,success:function(){e.navigateTo({url:"/pages/login/login"})}}),o.abrupt("return");case 5:if(r=Math.floor(Date.now()/1e3),s=new Date,u=s.toDateString(),l=new Date(1e3*n.time).toDateString(),u===l){o.next=12;break}return e.showModal({title:"提示",content:"不能打卡未来日期！",showCancel:!1}),o.abrupt("return");case 12:if(!(n.time<r)){o.next=15;break}return e.showModal({title:"提示",content:"无法对过去的时间打卡！",showCancel:!1}),o.abrupt("return");case 15:return f=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),5,0,0).getTime()/1e3),d=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),12,0,0).getTime()/1e3),g=Math.floor(new Date(s.getFullYear(),s.getMonth(),s.getDate(),20,30,0).getTime()/1e3),console.log(r),console.log(f),console.log(d),console.log(n.time),o.next=24,i.api.sign(t);case 24:h=o.sent,console.log(h.code),200===h.code?(n.isSignedIn=!0,r>=f&&r<d||r>=d&&r<g?r<n.time&&e.showModal({content:h.msg,icon:"success",success:function(){setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),1e3)}}):e.showModal({title:"提示",content:h.msg||"打卡超时，请稍后重试",showCancel:!1})):201===h.code?(n.isSignedIn=!1,e.showModal({title:"提示",content:h.msg||"你今日打卡已经超过限定次数",showCancel:!1,success:function(){setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),1e3)}})):e.showModal({title:"提示",content:h.msg||"操作失败，请稍后重试",showCancel:!1}),o.next=33;break;case 29:o.prev=29,o.t0=o["catch"](0),console.error("请求打卡接口出错:",o.t0),e.showModal({title:"提示",content:"打卡失败，请稍后重试。",showCancel:!1});case 33:case"end":return o.stop()}}),o,null,[[0,29]])})))()}}};t.default=r}).call(this,n("df3c")["default"])},7378:function(e,t,n){"use strict";n.r(t);var o=n("7277"),a=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=a.a},e7f7:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},a=[]},e8c1:function(e,t,n){"use strict";var o=n("f5a8"),a=n.n(o);a.a},f5a8:function(e,t,n){}},[["4111","common/runtime","common/vendor"]]]);