(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-publish-publish"],{"0829":function(t,e,i){"use strict";var n=i("8bdb"),a=i("ea07").entries;n({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"103b":function(t,e,i){"use strict";i.r(e);var n=i("aaa1"),a=i("3522");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("3add");var r=i("828b"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"1c3f77c9",null,!1,n["a"],void 0);e["default"]=s.exports},2456:function(t,e,i){var n=i("4015");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("42829300",n,!0,{sourceMap:!1,shadowMode:!1})},2522:function(t,e,i){var n=i("fc52");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("3b47f4d2",n,!0,{sourceMap:!1,shadowMode:!1})},"30f7":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("7a76"),i("c9b5")},3522:function(t,e,i){"use strict";i.r(e);var n=i("8bbb"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"3add":function(t,e,i){"use strict";var n=i("2522"),a=i.n(n);a.a},4015:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".me-container[data-v-2078327d]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:flex-start;\n\t/* 从顶部开始布局 */position:relative;\n\t/* 确保子元素的绝对定位是相对于这个容器 */height:calc(100vh %?-10?%)\n\t/* 确保容器占满整个视口高度 */}.butt[data-v-2078327d]{background-color:#007aff;height:%?100?%;width:calc(100% - %?80?%);\n\t/* 减去左右的 padding */border-radius:%?20?%;text-align:center;line-height:%?100?%;font-size:%?30?%;position:absolute;bottom:%?10?%;\n\t/* 距离底部的距离 */left:%?40?%\n\t/* 距离左侧的距离，和me-container的padding一致 */}.disheslist[data-v-2078327d]{width:100%;height:100vh;display:flex;flex-direction:column;margin-top:%?20?%}.type[data-v-2078327d]{height:12%;width:100%;display:flex;flex-direction:row;background-color:#fff;justify-content:flex-start;align-items:center;margin-bottom:%?30?%}.type-image[data-v-2078327d]{height:%?180?%;width:30%;border-radius:%?20?%;background-color:#007aff}.regard[data-v-2078327d]{width:30%;height:%?180?%;color:#000;font-size:%?30?%;font-weight:600;\n\t/* display: flex; */\n\t/* flex-direction: column; */\n\t/* background-color: bisque; */\n\t/* justify-content: space-around; */margin-left:%?20?%\n\t/* 将子元素放置在容器的顶部和底部 */}\n\n/* .price {\n\talign-self: self-start;\n} */.function[data-v-2078327d]{display:flex;height:100%;width:%?220?%;margin-left:auto;justify-content:space-around;align-items:center}.rigicon[data-v-2078327d]{height:50%;width:%?100?%;background-color:#007aff;display:flex;justify-content:center;align-items:center;border-radius:%?30?%}.loading[data-v-2078327d]{text-align:center;padding:%?20?%;color:#999}.popup-overlay[data-v-2078327d]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000;color:#000}.popup[data-v-2078327d]{position:relative;width:80%;max-width:%?600?%;background-color:#fff;border-radius:%?20?%;padding:%?20?%;box-shadow:0 0 15px rgba(0,0,0,.2)}.popup-header[data-v-2078327d]{font-size:%?36?%;font-weight:700;margin-bottom:%?20?%;text-align:center}.popup-content[data-v-2078327d]{\n\t/* 这里你可以添加弹出层内容的样式 */display:flex;width:100%;padding:%?30?%;box-sizing:border-box;justify-content:center;align-items:center}.popup-footer[data-v-2078327d]{display:flex;justify-content:space-between;margin-top:%?10?%}.close-button[data-v-2078327d]{position:absolute;top:%?5?%;right:%?5?%;font-size:%?40?%;color:#000;cursor:pointer;z-index:10;width:%?50?%;height:%?50?%;display:flex;justify-content:center;align-items:center;background-color:#fff;border-radius:50%;box-shadow:0 0 %?10?% rgba(0,0,0,.1)}.content[data-v-2078327d]{width:100%;height:%?300?%}.cuisine[data-v-2078327d]{width:100%;height:%?100?%;display:flex;justify-content:space-between;align-items:center}.class[data-v-2078327d]{width:100%;height:%?100?%;display:flex;justify-content:space-between;align-items:center}.editimg[data-v-2078327d]{width:100%;height:%?100?%;display:flex;justify-content:space-between;align-items:center}.cimg[data-v-2078327d]{width:%?100?%;height:%?100?%}.picker[data-v-2078327d]{width:%?100?%;height:%?100?%;display:flex;justify-content:end;align-items:center;font-size:%?35?%}.shuru[data-v-2078327d]{width:auto;height:%?100?%;display:flex;justify-content:end;align-items:center}.example-body[data-v-2078327d]{width:32%}.shurucon[data-v-2078327d]{text-align:end;font-size:%?35?%}.title[data-v-2078327d]{width:40%;font-size:%?35?%}.picker1[data-v-2078327d]{width:%?300?%;height:%?100?%;display:flex;justify-content:end;align-items:center;font-size:%?35?%}",""]),t.exports=e},4733:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,n.default)(t)};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("8d0b"))},5075:function(t,e,i){"use strict";var n=i("ae5c"),a=i("71e9"),o=i("e7e3"),r=i("52df"),s=i("81a7"),c=i("1fc1"),l=i("1297"),u=i("d67c"),d=i("5112"),f=i("7e91"),p=TypeError,h=function(t,e){this.stopped=t,this.result=e},v=h.prototype;t.exports=function(t,e,i){var g,m,b,w,x,y,_,C=i&&i.that,k=!(!i||!i.AS_ENTRIES),P=!(!i||!i.IS_RECORD),E=!(!i||!i.IS_ITERATOR),I=!(!i||!i.INTERRUPTED),S=n(e,C),D=function(t){return g&&f(g,"normal",t),new h(!0,t)},T=function(t){return k?(o(t),I?S(t[0],t[1],D):S(t[0],t[1])):I?S(t,D):S(t)};if(P)g=t.iterator;else if(E)g=t;else{if(m=d(t),!m)throw new p(r(t)+" is not iterable");if(s(m)){for(b=0,w=c(t);w>b;b++)if(x=T(t[b]),x&&l(v,x))return x;return new h(!1)}g=u(t,m)}y=P?t.next:g.next;while(!(_=a(y,g)).done){try{x=T(_.value)}catch(j){f(g,"throw",j)}if("object"==typeof x&&x&&l(v,x))return x}return new h(!1)}},"578c":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2634")),o=n(i("2fdc")),r=n(i("9b1b")),s=n(i("5de6"));i("fb2c"),i("8f71"),i("bf0f"),i("0829"),i("7a76"),i("c9b5"),i("c223");var c={data:function(){return{page:1,limit:8,totalnum:0,pageData:[],pageLoading:!1,hasMore:!0,searchParams:{}}},computed:{queryParams:function(){var t=Object.fromEntries(Object.entries(this.searchParams).filter((function(t){var e=(0,s.default)(t,2),i=(e[0],e[1]);return""!==i})));return(0,r.default)({page:this.page,limit:this.limit},t)}},methods:{loadPageData:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasMore&&!t.pageLoading){e.next=2;break}return e.abrupt("return");case 2:return t.pageLoading=!0,e.prev=3,e.next=6,t.fetchData(t.queryParams);case 6:i=e.sent,t.querySuccess(i),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.handleFetchError(e.t0);case 13:return e.prev=13,t.pageLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},fetchData:function(t){return(0,o.default)((0,a.default)().mark((function t(){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("fetchData 方法未实现");case 1:case"end":return t.stop()}}),t)})))()},querySuccess:function(t){null!==t&&void 0!==t&&t.listdata&&(this.pageData=1===this.page?t.listdata:this.pageData.concat(t.listdata),this.totalnum=t.totalnum||0,this.hasMore=this.pageData.length<this.totalnum)},handleScrollToLower:function(){!this.pageLoading&&this.hasMore&&(this.page+=1,this.loadPageData())},handleFetchError:function(t){console.error("Error loading data:",t)},resetPagination:function(){this.page=1,this.pageData=[],this.totalnum=0,this.hasMore=!0},reloadData:function(){this.resetPagination(),this.loadPageData()}}};e.default=c},"871e":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.useUpload=void 0;var a=n(i("2634")),o=n(i("2fdc"));i("bf0f");var r=n(i("6213"));e.useUpload=function(t){var e=t.uploadPath,i=t.tempFilePaths,n=t.FormData,s=t.file;return{upload:function(){return new Promise(function(){var t=(0,o.default)((0,a.default)().mark((function t(o,c){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showLoading({title:"上传中",mask:!0}),uni.uploadFile({url:r.default.UPLOAD_URL+e,name:"file",file:s,filePath:i,formData:n,header:{},success:function(t){uni.showToast({title:"上传成功"}),uni.hideLoading(),o(null===t||void 0===t?void 0:t.data)},fail:function(t){console.log(t),uni.showToast({title:"上传失败",icon:"error"}),uni.hideLoading()}});case 2:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}())}}}},"8bbb":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("8f71"),i("bf0f"),i("5ef2"),i("c9b5"),i("ab80");var n={name:"uniCombox",emits:["input","update:modelValue"],props:{border:{type:Boolean,default:!0},label:{type:String,default:""},labelWidth:{type:String,default:"auto"},placeholder:{type:String,default:""},candidates:{type:Array,default:function(){return[]}},emptyTips:{type:String,default:"无匹配项"},value:{type:[String,Number],default:""}},data:function(){return{showSelector:!1,inputVal:""}},computed:{labelStyle:function(){return"auto"===this.labelWidth?"":"width: ".concat(this.labelWidth)},filterCandidates:function(){var t=this;return this.candidates.filter((function(e){return e.toString().indexOf(t.inputVal)>-1}))},filterCandidatesLength:function(){return this.filterCandidates.length}},watch:{value:{handler:function(t){this.inputVal=t},immediate:!0}},methods:{toggleSelector:function(){this.showSelector=!this.showSelector},onFocus:function(){this.showSelector=!0},onBlur:function(){var t=this;setTimeout((function(){t.showSelector=!1}),153)},onSelectorClick:function(t){this.inputVal=this.filterCandidates[t],this.showSelector=!1,this.$emit("input",this.inputVal),this.$emit("update:modelValue",this.inputVal)},onInput:function(){var t=this;setTimeout((function(){t.$emit("input",t.inputVal),t.$emit("update:modelValue",t.inputVal)}))}}};e.default=n},a555:function(t,e,i){"use strict";var n=i("2456"),a=i.n(n);a.a},aaa1:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("15f4").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-combox",class:t.border?"":"uni-combox__no-border"},[t.label?i("v-uni-view",{staticClass:"uni-combox__label",style:t.labelStyle},[i("v-uni-text",[t._v(t._s(t.label))])],1):t._e(),i("v-uni-view",{staticClass:"uni-combox__input-box"},[i("v-uni-input",{staticClass:"uni-combox__input",attrs:{type:"text",placeholder:t.placeholder,"placeholder-class":"uni-combox__input-plac"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInput.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.onFocus.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),i("uni-icons",{attrs:{type:t.showSelector?"top":"bottom",size:"14",color:"#999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggleSelector.apply(void 0,arguments)}}})],1),t.showSelector?i("v-uni-view",{staticClass:"uni-combox__selector"},[i("v-uni-view",{staticClass:"uni-popper__arrow"}),i("v-uni-scroll-view",{staticClass:"uni-combox__selector-scroll",attrs:{"scroll-y":"true"}},[0===t.filterCandidatesLength?i("v-uni-view",{staticClass:"uni-combox__selector-empty"},[i("v-uni-text",[t._v(t._s(t.emptyTips))])],1):t._e(),t._l(t.filterCandidates,(function(e,n){return i("v-uni-view",{key:n,staticClass:"uni-combox__selector-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectorClick(n)}}},[i("v-uni-text",[t._v(t._s(e))])],1)}))],2)],1):t._e()],1)},o=[]},ad0f:function(t,e,i){"use strict";i.r(e);var n=i("ec9e"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b7c7:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.default)(t)||(0,a.default)(t)||(0,o.default)(t)||(0,r.default)()};var n=s(i("4733")),a=s(i("d14d")),o=s(i("5d6b")),r=s(i("30f7"));function s(t){return t&&t.__esModule?t:{default:t}}},bd7dd:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniCombox:i("103b").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"me-container"},[i("v-uni-scroll-view",{staticClass:"Stallholder",style:{height:"100vh"},attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.handleScrollToLower.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"disheslist"},t._l(t.pageData,(function(e){return i("v-uni-view",{key:e.id,staticClass:"type"},[t.isloaded?i("v-uni-image",{staticClass:"type-image",attrs:{"lazy-load":!0,src:e.imglogo,mode:"scaleToFill"}}):t._e(),i("v-uni-view",{staticClass:"regard"},[i("v-uni-view",{staticClass:"typetitle"},[t._v(t._s(e.goodsname))])],1),i("v-uni-view",{staticClass:"function"},[i("v-uni-view",{staticClass:"rigicon",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.edit(e)}}},[t._v("修改")]),i("v-uni-view",{staticClass:"rigicon",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.shelves(e)}}},[t._v("上架")])],1)],1)})),1),t.pageLoading?i("v-uni-view",{staticClass:"loading"},[t._v("加载中...")]):t._e(),t.hasMore?t._e():i("v-uni-view",{staticClass:"loading"},[t._v("没有更多了")])],1),i("v-uni-view",{staticClass:"butt",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goTorelePage.apply(void 0,arguments)}}},[t._v("点击新增菜品")]),t.showEditPopup?i("v-uni-view",{staticClass:"popup-overlay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"close-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[t._v("×")]),i("v-uni-view",{staticClass:"popup-content"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"cuisine"},[i("v-uni-view",{staticClass:"title"},[t._v("菜名")]),i("v-uni-view",{staticClass:"shuru"},[i("v-uni-input",{staticClass:"shurucon",attrs:{type:"text"},model:{value:t.currentItem.goodsname,callback:function(e){t.$set(t.currentItem,"goodsname",e)},expression:"currentItem.goodsname"}})],1)],1),i("v-uni-view",{staticClass:"class"},[i("v-uni-view",{staticClass:"title"},[t._v("分类")]),i("v-uni-picker",{staticClass:"picker",attrs:{range:t.pickerRange,value:t.selectedCategoryIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onCategoryChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker-text"},[t._v(t._s(t.pickerRange[t.selectedCategoryIndex]))])],1)],1),i("v-uni-view",{staticClass:"editimg"},[i("v-uni-view",{staticClass:"title"},[t._v("图片")]),i("v-uni-image",{staticClass:"cimg",attrs:{src:t.currentItem.imglogo,mode:"aspectFit"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadcuisine.apply(void 0,arguments)}}})],1)],1)],1),i("v-uni-view",{staticClass:"popup-footer"},[i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticStyle:{"background-color":"#007aff",color:"white"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmEdit.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1):t._e(),t.showEditPopup1?i("v-uni-view",{staticClass:"popup-overlay",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"close-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[t._v("×")]),i("v-uni-view",{staticClass:"popup-content"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"cuisine"},[i("v-uni-view",{staticClass:"title"},[t._v("选择摊位")]),i("v-uni-picker",{staticClass:"picker1",attrs:{range:t.pickerRange1,value:t.selectedCategoryIndex1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onMarketChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker-text"},[t._v(t._s(t.pickerRange1[t.selectedCategoryIndex1]))])],1)],1),i("v-uni-view",{staticClass:"editimg"},[i("v-uni-view",{staticClass:"title"},[t._v("菜品价格")]),i("v-uni-view",{staticClass:"shuru"},[i("v-uni-input",{staticClass:"shurucon",attrs:{type:"text",placeholder:"请输入价格"},model:{value:t.itemPrice,callback:function(e){t.itemPrice=e},expression:"itemPrice"}})],1),i("v-uni-view",{staticClass:"example-body"},[i("uni-combox",{attrs:{candidates:t.candidates,placeholder:"单位"},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1)],1),i("v-uni-view",{staticClass:"class"},[i("v-uni-view",{staticClass:"title"},[t._v("详细说明")]),i("v-uni-view",{staticClass:"shuru"},[i("v-uni-input",{staticClass:"shurucon",attrs:{type:"text",placeholder:"请输入详细说明"},model:{value:t.itemDescription,callback:function(e){t.itemDescription=e},expression:"itemDescription"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"popup-footer"},[i("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticStyle:{"background-color":"#007aff",color:"white"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmShelves.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1):t._e()],1)},o=[]},d14d:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},i("01a2"),i("e39c"),i("bf0f"),i("844d"),i("18f7"),i("de6c"),i("08eb")},ec9e:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2634")),o=n(i("9b1b")),r=n(i("2fdc")),s=n(i("b7c7"));i("fd3c"),i("bd06"),i("e838");var c=i("6213"),l=n(i("578c")),u=i("871e"),d={data:function(){return{pageData:[],showEditPopup:!1,currentItem:{},categories:[],pickerRange:[],selectedCategoryIndex:0,imageUploaded:!1,showEditPopup1:!1,pickerRange1:[],selectedCategoryIndex1:0,itemDescription:"",itemPrice:"",marketList:[],candidates:["斤","两"],unit:"",isloaded:!1}},mixins:[l.default],onLoad:function(){this.isloaded=!0},onShow:function(){this.reloadData()},methods:{fetchCategories:function(){var t=this;c.api.cglist().then((function(e){if(200===e.code){var i=e.data.listdata.map((function(t){return{id:t.id,content:t.content}}));t.categories=i,t.pickerRange=(0,s.default)(i.map((function(t){return t.content})))}}))},fetchMarketList:function(){var t=this;return(0,r.default)((0,a.default)().mark((function e(){var i,n,r;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,uni.getStorageSync("token"),i={limit:100,page:1},e.next=5,c.api.getMyShops((0,o.default)({token:t.token},i));case 5:n=e.sent,200===n.code?(r=n.data.listdata.map((function(t){return{id:t.id,title:t.title}})),t.marketList=r,t.pickerRange1=(0,s.default)(r.map((function(t){return t.title})))):console.error("Failed to fetch market list:",n.msg),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error fetching market list:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},onCategoryChange:function(t){this.selectedCategoryIndex=t.detail.value,this.currentItem.category_id=this.categories[this.selectedCategoryIndex].id},onMarketChange:function(t){this.selectedCategoryIndex1=t.detail.value,this.currentItem.market_id=this.marketList[this.selectedCategoryIndex1].id},fetchData:function(t){return(0,r.default)((0,a.default)().mark((function e(){var i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.api.getCommdityList(t);case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})))()},goTorelePage:function(){uni.navigateTo({url:"/pages/release/release"})},edit:function(t){this.currentItem=(0,o.default)({},t),this.fetchCategories(),this.showEditPopup=!0,this.fetchCommodityDetails(t.id)},fetchCommodityDetails:function(t){var e=this;c.api.getCommodityDetails(t).then((function(t){if(200===t.code){var i=t.data.listdata[0];e.currentItem.goodsname=i.goodsname,e.currentItem.imglogo=i.imglogo;var n=e.categories.findIndex((function(t){return t.id===i.category_id}));-1!==n&&(e.selectedCategoryIndex=n)}}))},uploadcuisine:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var i=e.tempFilePaths;if(i.length>0){var n=(0,u.useUpload)({uploadPath:"/group1/upload",tempFilePaths:i[0]}),a=n.upload;n.request;a().then((function(e){console.log(e),t.currentItem.imglogo=e,console.log("更新后的图片路径:",t.currentItem.imglogo),t.isImageSelected=!0,t.imageUploaded=!0}))}}})},shelves:function(t){this.currentItem=(0,o.default)({},t),this.showEditPopup1=!0,this.fetchMarketList()},closePopup:function(){this.showEditPopup=!1,this.showEditPopup1=!1},confirmEdit:function(){var t=this;if(this.currentItem.id)if(this.imageUploaded||this.currentItem.imglogo){var e=this.currentItem,i=e.id,n=e.category_id,a=e.goodsname,o=e.imglogo;c.api.editGoods({id:i,category_id:n,goodsname:a,imglogo:o}).then((function(e){200===e.code?(uni.showToast({title:"商品修改成功",icon:"success"}),t.reloadData(),t.closePopup()):uni.showToast({title:e.msg||"商品修改失败",icon:"none"})}))}else uni.showToast({title:"请上传图片",icon:"none"});else uni.showToast({title:"商品 ID 不正确",icon:"none"})},confirmShelves:function(){var t=this;console.log("Goods ID:",this.currentItem.id),this.itemPrice?this.unit?c.api.addCommodityToShop({goods_id:this.currentItem.id,shop_id:this.marketList[this.selectedCategoryIndex1].id,content:this.itemDescription,price:parseFloat(this.itemPrice),weight_name:this.unit}).then((function(e){200===e.code?(uni.showToast({title:"上架成功"}),t.closePopup(),t.reloadData()):uni.showToast({title:"上架失败",icon:"none"})})):uni.showToast({title:"请选择单位",icon:"none"}):uni.showToast({title:"请填写价格",icon:"none"})}}};e.default=d},f83a:function(t,e,i){"use strict";i.r(e);var n=i("bd7dd"),a=i("ad0f");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a555");var r=i("828b"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"2078327d",null,!1,n["a"],void 0);e["default"]=s.exports},fb2c:function(t,e,i){"use strict";var n=i("8bdb"),a=i("5075"),o=i("85f7");n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return a(t,(function(t,i){o(e,t,i)}),{AS_ENTRIES:!0}),e}})},fc52:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-combox[data-v-1c3f77c9]{font-size:14px;border:1px solid #dcdfe6;border-radius:4px;padding:6px 10px;position:relative;display:flex;flex-direction:row;align-items:center}.uni-combox__label[data-v-1c3f77c9]{font-size:16px;line-height:22px;padding-right:10px;color:#999}.uni-combox__input-box[data-v-1c3f77c9]{position:relative;display:flex;flex:1;flex-direction:row;align-items:center}.uni-combox__input[data-v-1c3f77c9]{flex:1;font-size:14px;height:22px;line-height:22px}.uni-combox__input-plac[data-v-1c3f77c9]{font-size:14px;color:#999}.uni-combox__selector[data-v-1c3f77c9]{box-sizing:border-box;position:absolute;top:calc(100% + 12px);left:0;width:100%;background-color:#fff;border:1px solid #ebeef5;border-radius:6px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);z-index:2;padding:4px 0}.uni-combox__selector-scroll[data-v-1c3f77c9]{max-height:200px;box-sizing:border-box}.uni-combox__selector-empty[data-v-1c3f77c9],\n.uni-combox__selector-item[data-v-1c3f77c9]{display:flex;cursor:pointer;line-height:36px;font-size:14px;text-align:center;padding:0 10px}.uni-combox__selector-item[data-v-1c3f77c9]:hover{background-color:#f9f9f9}.uni-combox__selector-empty[data-v-1c3f77c9]:last-child,\n.uni-combox__selector-item[data-v-1c3f77c9]:last-child{border-bottom:none}.uni-popper__arrow[data-v-1c3f77c9],\n.uni-popper__arrow[data-v-1c3f77c9]::after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid;border-width:6px}.uni-popper__arrow[data-v-1c3f77c9]{-webkit-filter:drop-shadow(0 2px 12px rgba(0,0,0,.03));filter:drop-shadow(0 2px 12px rgba(0,0,0,.03));top:-6px;left:10%;margin-right:3px;border-top-width:0;border-bottom-color:#ebeef5}.uni-popper__arrow[data-v-1c3f77c9]::after{content:" ";top:1px;margin-left:-6px;border-top-width:0;border-bottom-color:#fff}.uni-combox__no-border[data-v-1c3f77c9]{border:none}',""]),t.exports=e}}]);