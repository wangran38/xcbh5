(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"0c1f":function(t,e,i){"use strict";i.r(e);var n=i("908c"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"0f0f":function(t,e,i){"use strict";i.r(e);var n=i("19e6"),o=i("0c1f");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("9f3a");var r=i("828b"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"6dd03544",null,!1,n["a"],void 0);e["default"]=s.exports},"19e6":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("15f4").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"me-container"},[i("v-uni-view",{staticClass:"user"},[i("v-uni-view",{staticClass:"user-info"},[i("v-uni-view",{staticClass:"user-img"},[i("v-uni-image",{attrs:{src:t.userAvatar||"http://h5.xcbdsc.com/static/morentouxiang.jpg",mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"user-name"},[t.isLoggedIn?t._e():i("v-uni-button",{staticClass:"login-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login.apply(void 0,arguments)}}},[t._v("点击登录")]),t.isLoggedIn?i("v-uni-view",{staticClass:"nickname-container"},[i("v-uni-view",{staticClass:"nickname-input"},[t._v(t._s(t.userName||"请到我的信息中填写昵称"))])],1):t._e()],1),i("uni-icons",{staticClass:"settings-icon",attrs:{"custom-prefix":"iconfont",type:"icon-shezhi",size:"20"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useredit.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"Integral"},[i("v-uni-view",{staticClass:"Total-spending"},[i("v-uni-view",[t._v("消费总额")]),i("v-uni-view",[t._v("0元")])],1),i("v-uni-view",{staticClass:"Points-available"},[i("v-uni-view",[t._v("可用积分")]),i("v-uni-view",[t._v(t._s(t.score)+"分")])],1),i("v-uni-view",{staticClass:"Freeze-points"},[i("v-uni-view",[t._v("冻结积分")]),i("v-uni-view",[t._v("0分")])],1)],1),i("v-uni-view",{staticClass:"lottery",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.lottery.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"lottery-info"},[i("uni-icons",{attrs:{type:"auth",size:"30",color:"#00ff00"}}),i("v-uni-text",{staticStyle:{margin:"auto 40rpx","text-align":"center"}},[t._v("打卡抽奖")]),i("v-uni-text",{staticStyle:{"font-size":"24rpx",color:"#708090"}},[t._v("累计打卡"+t._s(t.totalnum)+"次")])],1),i("v-uni-view",{staticClass:"item"},[i("uni-icons",{attrs:{type:"right",size:"20"}})],1)],1),i("v-uni-view",{staticClass:"MyPoints",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mypoints.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"MyPoints-info"},[i("uni-icons",{attrs:{type:"vip",size:"30",color:"#f4e323"}}),i("v-uni-text",{staticStyle:{margin:"auto 40rpx","text-align":"center"}},[t._v("我的积分")])],1),i("v-uni-view",{staticClass:"item"},[i("uni-icons",{attrs:{type:"right",size:"20"}})],1)],1),i("v-uni-view",{staticClass:"My-Order"},[i("v-uni-view",{staticClass:"Order-top",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toorders(0)}}},[i("v-uni-view",{staticStyle:{margin:"auto 20rpx","text-align":"center"}},[t._v("我的订单")]),i("v-uni-view",{staticStyle:{margin:"auto 20rpx","text-align":"center",color:"#ccc"}},[t._v("全部"),i("uni-icons",{attrs:{type:"right",size:"14",color:"#ccc"}})],1)],1),i("v-uni-view",{staticClass:"Order-bottom"},[i("v-uni-view",{staticClass:"item-title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toorders(1)}}},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-zhifuguanli",size:"30"}}),i("v-uni-text",{staticStyle:{"margin-top":"10rpx"}},[t._v("待支付")])],1),i("v-uni-view",{staticClass:"item-title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toorders(2)}}},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fapiaoguanli",size:"30"}}),i("v-uni-text",{staticStyle:{"margin-top":"10rpx"}},[t._v("已支付")])],1),i("v-uni-view",{staticClass:"item-title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toorders(3)}}},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-fahuoguanli",size:"30"}}),i("v-uni-text",{staticStyle:{"margin-top":"10rpx"}},[t._v("待收货")])],1),i("v-uni-view",{staticClass:"item-title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toorders(4)}}},[i("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-dingdanguanli",size:"30"}}),i("v-uni-text",{staticStyle:{"margin-top":"10rpx"}},[t._v("已完成")])],1)],1)],1),i("v-uni-view",{staticClass:"tool"},[i("v-uni-view",{staticClass:"Apply",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.Apply.apply(void 0,arguments)}}},[i("v-uni-view",[t._v("摊主申请")]),i("uni-icons",{attrs:{type:"right",size:"20"}})],1),i("v-uni-view",{staticClass:"user-edit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useredit.apply(void 0,arguments)}}},[i("v-uni-view",[t._v("我的信息")]),i("uni-icons",{attrs:{type:"right",size:"20"}})],1)],1),t.isLoggedIn?i("v-uni-view",[i("v-uni-button",{staticClass:"Signout",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[t._v("退出登录")])],1):t._e()],1)},a=[]},"75df":function(t,e,i){var n=i("84dd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("967d").default;o("84b9258a",n,!0,{sourceMap:!1,shadowMode:!1})},"84dd":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'.me-container[data-v-6dd03544]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?80?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;position:relative}.me-container[data-v-6dd03544]::after{content:"";width:140%;height:200px;position:absolute;left:-20%;top:0;z-index:-1;border-radius:0 0 50% 50%;background-image:linear-gradient(90deg,#4facfe 0,#00f2fe)}.user[data-v-6dd03544]{height:%?140?%;display:flex;flex-direction:row;\n\t/* justify-content: space-between; */text-align:center;\n\t/* border: 1px solid #ccc; */\n\t/* background-color: white; */background-color:initial}.user-info[data-v-6dd03544]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;\n\n\t/* justify-content: flex-start; */margin:0 %?20?%;width:100%}.settings-icon[data-v-6dd03544]{margin-left:auto\n\t/* 将设置图标推到最右侧 */}.user-img[data-v-6dd03544]{width:%?110?%;height:%?110?%;border:1px solid #ccc;border-radius:50%;overflow:hidden\n\t/* margin: auto auto; */\n\t/* background-color: #00aaff; */}.user-img>uni-image[data-v-6dd03544]{width:100%;height:100%;border-radius:50%}.user-name[data-v-6dd03544]{display:flex;justify-content:center;align-items:center;color:#000;margin:auto %?30?%}.nickname-container[data-v-6dd03544]{display:flex;margin-top:%?10?%}.nickname-input[data-v-6dd03544]{flex:1;height:%?60?%;\n\t/* border: 1rpx solid #ccc; */border-radius:%?10?%;padding:0 %?10?%;margin-right:%?10?%;font-size:%?30?%;font-weight:600}.lottery[data-v-6dd03544]{width:100%;height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:#000;text-align:center;border:%?1?% solid #ccc;background-color:#fff;box-sizing:border-box;border-top:none;border-top-left-radius:%?20?%;border-top-right-radius:%?20?%}.lottery-info[data-v-6dd03544]{display:flex;align-items:center;margin-left:%?20?%}.lottery>.item[data-v-6dd03544]{width:%?40?%;height:%?100?%;text-align:center;line-height:%?100?%;color:#e5e5e5;margin-right:%?12?%}.prize[data-v-6dd03544]{width:100%;height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:#000;text-align:center;border:%?1?% solid #ccc;background-color:#fff;box-sizing:border-box;border-top:none\n\t/* border-bottom-left-radius: 20rpx; */\n\t/* border-bottom-right-radius: 20rpx; */}.prize-info[data-v-6dd03544]{display:flex;align-items:center;margin-left:%?20?%}.prize>.item[data-v-6dd03544]{width:%?40?%;height:%?100?%;text-align:center;line-height:%?100?%;color:#e5e5e5;margin-right:%?12?%}.MyPoints[data-v-6dd03544]{width:100%;height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:#000;text-align:center;border:%?1?% solid #ccc;background-color:#fff;box-sizing:border-box;border-top:none;border-bottom-left-radius:%?20?%;border-bottom-right-radius:%?20?%}.MyPoints-info[data-v-6dd03544]{display:flex;align-items:center;margin-left:%?20?%}.MyPoints>.item[data-v-6dd03544]{width:%?40?%;height:%?100?%;text-align:center;line-height:%?100?%;color:#e5e5e5;margin-right:%?12?%}.My-Order[data-v-6dd03544]{height:%?200?%;width:100%;margin-top:5%;background-color:#fff;border:1px solid #ccc;border-radius:%?20?%}.Order-top[data-v-6dd03544]{height:%?60?%;width:100%;line-height:%?60?%;display:flex;flex-direction:row;justify-content:space-between;border-bottom:%?1?% solid #ccc;color:#000}.Order-bottom[data-v-6dd03544]{height:%?140?%;flex:5;display:flex;flex-direction:row}.item-title[data-v-6dd03544]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;\n\t/* padding-top: 20rpx; */\n\t/* padding-bottom: 20rpx; */color:#000;box-sizing:border-box\n\t/* background-color: #4facfe; */\n\t/* height: 80%; */}.tool[data-v-6dd03544]{height:%?180?%;width:100%;margin-top:5%;background-color:#fff;border:%?1?% solid #ccc;display:flex;flex-direction:column;border-radius:%?20?%}.Apply[data-v-6dd03544]{height:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:#000;padding:0 %?20?%;border-bottom:%?1?% solid #ccc}.Signout[data-v-6dd03544]{margin-top:%?20?%;background-color:#007aff;color:#fff}.user-edit[data-v-6dd03544]{height:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;color:#000;padding:0 %?20?%}.login-button[data-v-6dd03544]{display:flex;align-items:center;-webkit-appearance:none;appearance:none;background-color:#fff;border-radius:24px;font-size:16px;font-weight:500;height:40px;justify-content:center;letter-spacing:.25px;line-height:%?40?%;max-width:100%;overflow:visible}.Integral[data-v-6dd03544]{color:#3a3a3c;width:100%;height:%?100?%;background-color:#fff;display:flex;align-items:center;margin-bottom:3%;border-radius:%?20?%;border:1px solid #ccc}.Total-spending[data-v-6dd03544]{width:33%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;border-right:1px solid #ccc}.Points-available[data-v-6dd03544]{width:34%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;border-right:1px solid #ccc}.Freeze-points[data-v-6dd03544]{width:33%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}',""]),t.exports=e},"908c":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("2634")),a=n(i("2fdc")),r=i("6213"),s={data:function(){return{isLoggedIn:!1,userName:"",userAvatar:"",score:"",totalnum:0}},onShow:function(){this.checkLoginStatus(),this.isLoggedIn&&this.fetchUserProfile(),this.signlist()},methods:{checkLoginStatus:function(){var t=uni.getStorageSync("token");this.isLoggedIn=!!t},fetchUserProfile:function(){var t=this;return(0,a.default)((0,o.default)().mark((function e(){var i,n,a,s,c,d;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=uni.getStorageSync("token"),e.next=4,r.api.getUserProfile(i);case 4:n=e.sent,200===n.code?(a=n.data,s=a.name,c=a.Headimgurl,d=a.score,t.userName=s,t.userAvatar=c,t.score=d):uni.showToast({title:"获取用户信息失败",icon:"none"}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error fetching user profile:",e.t0),uni.showToast({title:"获取用户信息失败",icon:"none"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},signlist:function(t){var e=this;return(0,a.default)((0,o.default)().mark((function t(){var i,n;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=uni.getStorageSync("token"),t.next=3,r.api.signlist(i);case 3:n=t.sent,e.totalnum=n.data.totalnum,console.log(e.totalnum);case 5:case"end":return t.stop()}}),t)})))()},login:function(){uni.navigateTo({url:"/pages/login/login"})},Apply:function(){uni.navigateTo({url:"/pages/Apply/Apply"})},useredit:function(){uni.navigateTo({url:"/pages/user-edit/user-edit"})},coupons:function(){uni.navigateTo({url:"/pages/coupons/coupons"})},lottery:function(){uni.navigateTo({url:"/pages/clock-records/clock-records"})},toorders:function(t){uni.navigateTo({url:"/pages/orders/orders?orderStatus=".concat(t)})},mypoints:function(){uni.navigateTo({url:"/pages/MyPoints-records/MyPoints-records"})},logout:function(){try{uni.removeStorageSync("token"),uni.removeStorageSync("nickname"),console.log("Token and nickname removed from storage")}catch(t){console.error("Failed to remove token or nickname from storage",t)}this.isLoggedIn=!1,this.nickname="",this.userName="",uni.redirectTo({url:"/pages/login/login"})}}};e.default=s},"9f3a":function(t,e,i){"use strict";var n=i("75df"),o=i.n(n);o.a}}]);