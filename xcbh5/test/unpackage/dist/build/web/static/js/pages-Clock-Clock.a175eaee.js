(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Clock-Clock"],{"29d1":function(e,t,n){"use strict";n("6a54");var o=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("2634")),i=o(n("2fdc")),s=n("6213"),c={data:function(){return{isSignedIn:!1,timestamp:"",time:""}},onLoad:function(e){e.time&&(this.time=e.time),this.signIn()},methods:{signIn:function(e){var t=this;return(0,i.default)((0,a.default)().mark((function n(){var o,i,c,r,u,l,d,f,g;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,o=uni.getStorageSync("token"),o){n.next=5;break}return uni.showModal({title:"提示",content:"请登录后再打卡",showCancel:!1,success:function(){uni.navigateTo({url:"/pages/login/login"})}}),n.abrupt("return");case 5:if(i=Math.floor(Date.now()/1e3),c=new Date,r=c.toDateString(),u=new Date(1e3*t.time).toDateString(),r===u){n.next=12;break}return uni.showModal({title:"提示",content:"不能打卡未来日期！",showCancel:!1}),n.abrupt("return");case 12:if(!(t.time<i)){n.next=15;break}return uni.showModal({title:"提示",content:"无法对过去的时间打卡！",showCancel:!1}),n.abrupt("return");case 15:return l=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),5,0,0).getTime()/1e3),d=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),12,0,0).getTime()/1e3),f=Math.floor(new Date(c.getFullYear(),c.getMonth(),c.getDate(),20,30,0).getTime()/1e3),console.log(i),console.log(l),console.log(d),console.log(t.time),n.next=24,s.api.sign(e);case 24:g=n.sent,console.log(g.code),200===g.code?(t.isSignedIn=!0,i>=l&&i<d||i>=d&&i<f?i<t.time&&uni.showModal({content:g.msg,icon:"success",success:function(){setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),1e3)}}):uni.showModal({title:"提示",content:g.msg||"打卡超时，请稍后重试",showCancel:!1})):201===g.code?(t.isSignedIn=!1,uni.showModal({title:"提示",content:g.msg||"你今日打卡已经超过限定次数",showCancel:!1,success:function(){setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),1e3)}})):uni.showModal({title:"提示",content:g.msg||"操作失败，请稍后重试",showCancel:!1}),n.next=33;break;case 29:n.prev=29,n.t0=n["catch"](0),console.error("请求打卡接口出错:",n.t0),uni.showModal({title:"提示",content:"打卡失败，请稍后重试。",showCancel:!1});case 33:case"end":return n.stop()}}),n,null,[[0,29]])})))()}}};t.default=c},"2eaa":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var o=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"me-container"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"state"},[this._v(this._s(this.isSignedIn?"已打卡":"此次未打卡"))])],1)],1)},a=[]},"49cb":function(e,t,n){"use strict";n.r(t);var o=n("2eaa"),a=n("7378");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("fedb");var s=n("828b"),c=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"c460b236",null,!1,o["a"],void 0);t["default"]=c.exports},"6f5a":function(e,t,n){var o=n("c86c");t=o(!1),t.push([e.i,".me-container[data-v-c460b236]{height:100vh;width:100%;box-sizing:border-box;color:#fff;z-index:1;display:flex;flex-direction:column;justify-content:flex-start}.content[data-v-c460b236]{height:100%;width:90%;margin:auto auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.state[data-v-c460b236]{font-size:%?60?%;margin-bottom:%?100?%;color:#000}.clock[data-v-c460b236]{height:5%;width:50%;font-size:%?50?%;border:1px solid #007aff;background-color:#007aff;border-radius:%?20?%;display:flex;justify-content:center;align-items:center}",""]),e.exports=t},7378:function(e,t,n){"use strict";n.r(t);var o=n("29d1"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},a586:function(e,t,n){var o=n("6f5a");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("967d").default;a("225690ea",o,!0,{sourceMap:!1,shadowMode:!1})},fedb:function(e,t,n){"use strict";var o=n("a586"),a=n.n(o);a.a}}]);