(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Listed-Dishes-Listed-Dishes"],{"0829":function(t,e,a){"use strict";var n=a("8bdb"),i=a("ea07").entries;n({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"0a01":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("bd06");var i=n(a("2634")),r=n(a("9b1b")),o=n(a("2fdc")),s=a("6213"),c=n(a("578c")),u={data:function(){return{pageData:[]}},onShow:function(){this.token=uni.getStorageSync("token"),this.reloadData()},mixins:[c.default],methods:{fetchData:function(t){return(0,o.default)((0,i.default)().mark((function e(){var a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.api.myShoplist((0,r.default)((0,r.default)({},t),{},{isshow:1}));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))()},off:function(t){var e=this;return(0,o.default)((0,i.default)().mark((function a(){var n,r;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.api.xiajiashop({id:t,isshow:2});case 3:n=a.sent,200===n.code?(uni.showToast({title:"下架成功",icon:"success"}),r=e.pageData.findIndex((function(e){return e.id===t})),-1!==r&&(e.pageData[r].isshow=0),e.reloadData()):uni.showToast({title:n.msg||"操作失败",icon:"none"}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),uni.showToast({title:"请求失败",icon:"none"}),console.error("下架失败",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}};e.default=u},5075:function(t,e,a){"use strict";var n=a("ae5c"),i=a("71e9"),r=a("e7e3"),o=a("52df"),s=a("81a7"),c=a("1fc1"),u=a("1297"),d=a("d67c"),l=a("5112"),f=a("7e91"),h=TypeError,v=function(t,e){this.stopped=t,this.result=e},p=v.prototype;t.exports=function(t,e,a){var g,b,w,m,x,y,_,D=a&&a.that,k=!(!a||!a.AS_ENTRIES),E=!(!a||!a.IS_RECORD),S=!(!a||!a.IS_ITERATOR),j=!(!a||!a.INTERRUPTED),T=n(e,D),C=function(t){return g&&f(g,"normal",t),new v(!0,t)},P=function(t){return k?(r(t),j?T(t[0],t[1],C):T(t[0],t[1])):j?T(t,C):T(t)};if(E)g=t.iterator;else if(S)g=t;else{if(b=l(t),!b)throw new h(o(t)+" is not iterable");if(s(b)){for(w=0,m=c(t);m>w;w++)if(x=P(t[w]),x&&u(p,x))return x;return new v(!1)}g=d(t,b)}y=E?t.next:g.next;while(!(_=i(y,g)).done){try{x=P(_.value)}catch(M){f(g,"throw",M)}if("object"==typeof x&&x&&u(p,x))return x}return new v(!1)}},"578c":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("2634")),r=n(a("2fdc")),o=n(a("9b1b")),s=n(a("5de6"));a("fb2c"),a("8f71"),a("bf0f"),a("0829"),a("7a76"),a("c9b5"),a("c223");var c={data:function(){return{page:1,limit:8,totalnum:0,pageData:[],pageLoading:!1,hasMore:!0,searchParams:{}}},computed:{queryParams:function(){var t=Object.fromEntries(Object.entries(this.searchParams).filter((function(t){var e=(0,s.default)(t,2),a=(e[0],e[1]);return""!==a})));return(0,o.default)({page:this.page,limit:this.limit},t)}},methods:{loadPageData:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasMore&&!t.pageLoading){e.next=2;break}return e.abrupt("return");case 2:return t.pageLoading=!0,e.prev=3,e.next=6,t.fetchData(t.queryParams);case 6:a=e.sent,t.querySuccess(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.handleFetchError(e.t0);case 13:return e.prev=13,t.pageLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},fetchData:function(t){return(0,r.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("fetchData 方法未实现");case 1:case"end":return t.stop()}}),t)})))()},querySuccess:function(t){null!==t&&void 0!==t&&t.listdata&&(this.pageData=1===this.page?t.listdata:this.pageData.concat(t.listdata),this.totalnum=t.totalnum||0,this.hasMore=this.pageData.length<this.totalnum)},handleScrollToLower:function(){!this.pageLoading&&this.hasMore&&(this.page+=1,this.loadPageData())},handleFetchError:function(t){console.error("Error loading data:",t)},resetPagination:function(){this.page=1,this.pageData=[],this.totalnum=0,this.hasMore=!0},reloadData:function(){this.resetPagination(),this.loadPageData()}}};e.default=c},"728a":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".me-container[data-v-45fbcbde]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:flex-start;\n\t/* 从顶部开始布局 */position:relative;\n\t/* 确保子元素的绝对定位是相对于这个容器 */height:calc(100vh %?-10?%)\n\t/* 确保容器占满整个视口高度 */}.disheslist[data-v-45fbcbde]{width:100%;height:100vh;display:flex;flex-direction:column;margin-top:%?20?%}.type[data-v-45fbcbde]{height:12%;width:100%;display:flex;flex-direction:row;background-color:#fff;justify-content:flex-start;align-items:center;margin-bottom:%?30?%}.type-image[data-v-45fbcbde]{height:%?180?%;width:30%;border-radius:%?20?%;background-color:#007aff}.regard[data-v-45fbcbde]{flex:1;\n\t/* width: 30%; */height:%?180?%;color:#000;font-size:%?30?%;font-weight:600;\n\t/* display: flex; */\n\t/* flex-direction: column; */\n\t/* background-color: bisque; */\n\t/* justify-content: space-around; */margin-left:%?20?%\n\t/* 将子元素放置在容器的顶部和底部 */}.function[data-v-45fbcbde]{display:flex;height:100%;width:%?150?%;\n\t/* margin-left: auto; */margin-right:0;justify-content:end;align-items:center}.rigicon[data-v-45fbcbde]{height:50%;width:100%;background-color:#007aff;display:flex;justify-content:center;align-items:center;border-radius:%?30?%}.disabled[data-v-45fbcbde]{background-color:#d3d3d3; /* 灰色背景 */cursor:not-allowed /* 更改鼠标样式为禁用状态 */}.loading[data-v-45fbcbde]{text-align:center;padding:%?20?%;color:#999}",""]),t.exports=e},7666:function(t,e,a){"use strict";a.r(e);var n=a("ea4b"),i=a("b0b3");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("780f");var o=a("828b"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"45fbcbde",null,!1,n["a"],void 0);e["default"]=s.exports},"780f":function(t,e,a){"use strict";var n=a("e4a6"),i=a.n(n);i.a},b0b3:function(t,e,a){"use strict";a.r(e);var n=a("0a01"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},e4a6:function(t,e,a){var n=a("728a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("17c5c789",n,!0,{sourceMap:!1,shadowMode:!1})},ea4b:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"me-container"},[a("v-uni-scroll-view",{staticClass:"Stallholder",style:{height:"100vh"},attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.handleScrollToLower.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"disheslist"},[t._l(t.pageData,(function(e){return a("v-uni-view",{key:e.id,staticClass:"type"},[a("v-uni-image",{staticClass:"type-image",attrs:{src:e.imglogo,mode:"scaleToFill"}}),a("v-uni-view",{staticClass:"regard"},[a("v-uni-view",{staticClass:"typetitle"},[t._v(t._s(e.commodity_name))]),a("v-uni-view",{staticClass:"typetitle"},[t._v(t._s(e.price.toFixed(2))+" 元/斤")])],1),a("v-uni-view",{staticClass:"function"},[a("v-uni-view",{class:{rigicon:!0,disabled:0===e.isshow},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),1===e.isshow&&t.off(e.id)}}},[t._v(t._s(1===e.isshow?"下架":"已下架"))])],1)],1)})),t.pageLoading?a("v-uni-view",{staticClass:"loading"},[t._v("加载中...")]):t._e(),t.hasMore?t._e():a("v-uni-view",{staticClass:"loading"},[t._v("没有更多了")])],2)],1)],1)},i=[]},fb2c:function(t,e,a){"use strict";var n=a("8bdb"),i=a("5075"),r=a("85f7");n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,a){r(e,t,a)}),{AS_ENTRIES:!0}),e}})}}]);