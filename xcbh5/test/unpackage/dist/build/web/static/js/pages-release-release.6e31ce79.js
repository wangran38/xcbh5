(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-release-release"],{"01c6":function(e,t,i){var n=i("bd04");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("254b510f",n,!0,{sourceMap:!1,shadowMode:!1})},"30f7":function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("7a76"),i("c9b5")},4733:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,n.default)(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("8d0b"))},"77dd":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("b7c7"));i("fd3c"),i("c223");var o=i("6213"),r=i("871e"),c={data:function(){return{goodsname:"",category_id:"",imageUploaded:!1,imglogo:"",categories:[],pickerRange:[],selectedCategoryIndex:0}},onLoad:function(){this.fetchCategories()},methods:{fetchCategories:function(){var e=this;o.api.cglist().then((function(t){if(200===t.code){var i=t.data.listdata.map((function(e){return{id:e.id,content:e.content}}));e.categories=i,e.pickerRange=["请选择分类"].concat((0,a.default)(i.map((function(e){return e.content})))),i.length>0&&(e.category_id=i[0].id)}else uni.showToast({title:t.message||"获取分类失败",icon:"none"})})).catch((function(e){console.error(e),uni.showToast({title:"获取分类失败",icon:"none"})}))},uploadcuisine:function(){var e=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;if(i.length>0){console.log(i);var n=(0,r.useUpload)({uploadPath:"/group1/upload",tempFilePaths:i[0]}),a=n.upload;n.request;a().then((function(t){console.log(t),e.imglogo=t,e.isImageSelected=!0,e.imageUploaded=!0}))}}})},onCategoryChange:function(e){var t=e.detail.value;this.selectedCategoryIndex=t,this.category_id=t>0?this.categories[t-1].id:""},submit:function(){var e=this,t=uni.getStorageSync("token");t?this.goodsname&&this.category_id?o.api.addgoods(t,{category_id:this.category_id,goodsname:this.goodsname,imglogo:this.imglogo}).then((function(t){200===t.code?(uni.showToast({title:"菜品添加成功",icon:"success"}),e.goodsname="",e.category_id="",e.imglogo="",e.imageUploaded=!1):uni.showToast({title:t.msg||"添加失败",icon:"none"})})).catch((function(e){console.error(e),uni.showToast({title:"添加失败",icon:"none"})})):uni.showToast({title:"请填写完整信息",icon:"none"}):uni.showToast({title:"用户未登录，请重新登录",icon:"none"})}}};t.default=c},"871e":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.useUpload=void 0;var a=n(i("2634")),o=n(i("2fdc"));i("bf0f");var r=n(i("6213"));t.useUpload=function(e){var t=e.uploadPath,i=e.tempFilePaths,n=e.FormData,c=e.file;return{upload:function(){return new Promise(function(){var e=(0,o.default)((0,a.default)().mark((function e(o,s){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.showLoading({title:"上传中",mask:!0}),uni.uploadFile({url:r.default.UPLOAD_URL+t,name:"file",file:c,filePath:i,formData:n,header:{},success:function(e){uni.showToast({title:"上传成功"}),uni.hideLoading(),o(null===e||void 0===e?void 0:e.data)},fail:function(e){console.log(e),uni.showToast({title:"上传失败",icon:"error"}),uni.hideLoading()}});case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}}}},"9c6d":function(e,t,i){"use strict";i.r(t);var n=i("77dd"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},a412:function(e,t,i){"use strict";var n=i("01c6"),a=i.n(n);a.a},b7c7:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e)||(0,a.default)(e)||(0,o.default)(e)||(0,r.default)()};var n=c(i("4733")),a=c(i("d14d")),o=c(i("5d6b")),r=c(i("30f7"));function c(e){return e&&e.__esModule?e:{default:e}}},ba24:function(e,t,i){"use strict";i.r(t);var n=i("d139"),a=i("9c6d");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("a412");var r=i("828b"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"184b11f5",null,!1,n["a"],void 0);t["default"]=c.exports},bd04:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".me-container[data-v-184b11f5]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:center}.content[data-v-184b11f5]{margin-top:%?30?%;background-color:#fff;flex:4;display:flex;flex-direction:column;padding:0 %?10?%}.name[data-v-184b11f5]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.price[data-v-184b11f5]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.img[data-v-184b11f5]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.title[data-v-184b11f5]{width:%?100?%;height:%?100?%;text-align:center;line-height:%?100?%;\n\t/* font-size: 34rpx; */color:#666}.item[data-v-184b11f5]{width:%?250?%;height:%?80?%;text-align:center;display:flex;flex-direction:row;margin-left:auto;\n\t/* 将item推到父容器的右边 */align-items:center\n\t/* justify-content: center; */}.rigicon[data-v-184b11f5]{\n\t/* background-color: bisque; */width:%?50?%;height:%?80?%;text-align:center;line-height:%?80?%}.picker[data-v-184b11f5]{width:%?250?%;height:100%;display:flex;justify-content:center;align-items:center\n\t/* background-color: #007aff; */}.picker-text[data-v-184b11f5]{\n\t/* width: 250rpx; */height:100%;color:grey}.picture[data-v-184b11f5]{width:%?250?%;text-align:center;color:grey;font-size:%?25?%}.submit[data-v-184b11f5]{\n\t/* flex: 1; */height:%?80?%;text-align:center;line-height:%?80?%;color:#fff;font-size:%?36?%;font-weight:500;margin:%?20?% 0;background-color:#007aff;border-radius:%?20?%}.input-text[data-v-184b11f5]{color:grey;border:none;outline:none;box-shadow:none;font-size:%?25?%}.uploaded-image[data-v-184b11f5]{height:%?100?%;width:%?100?%}",""]),e.exports=t},d139:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("15f4").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"me-container"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"name"},[i("v-uni-text",{staticClass:"title"},[e._v("菜名")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"picture"},[i("v-uni-input",{staticClass:"input-text",attrs:{type:"text",placeholder:"请输入菜名"},model:{value:e.goodsname,callback:function(t){e.goodsname=t},expression:"goodsname"}})],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticClass:"title"},[e._v("分类")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-picker",{staticClass:"picker",attrs:{range:e.pickerRange,value:e.selectedCategoryIndex},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onCategoryChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker-text"},[e._v(e._s(e.pickerRange[e.selectedCategoryIndex]))])],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"img"},[i("v-uni-text",{staticClass:"title"},[e._v("图片")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"picture",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadcuisine.apply(void 0,arguments)}}},[e.imglogo?i("v-uni-image",{staticClass:"uploaded-image",attrs:{src:e.imglogo,mode:"aspectFit"}}):i("v-uni-view",[e._v("请上传图片")])],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"submit",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1),i("v-uni-text",{staticStyle:{color:"red","margin-top":"30rpx","font-size":"30rpx"}},[e._v("注意：添加菜品后要在菜品列表里面选择上架")])],1)},o=[]},d14d:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},i("01a2"),i("e39c"),i("bf0f"),i("844d"),i("18f7"),i("de6c"),i("08eb")}}]);